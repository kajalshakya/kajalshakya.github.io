if("undefined"==typeof jQuery)throw new Error("Iframe-modal plugin requires jQuery");!function(o){"use strict";var i=jQuery.fn.jquery.split(" ")[0].split(".");if(i[0]<2&&i[1]<9||1==i[0]&&9==i[1]&&i[2]<1||i[0]>3)throw new Error("Iframe-modal plugin requires jQuery version 1.9.1 or higher, but lower than version 4")}(),function(o){"use strict";var i={padding:0,paddingColor:"#ffffff",borderRadius:0,margin:35,responsive:!0,width:560,height:340,preload:!1,src:"",onClosed:o.noop,beforeClosed:o.noop,onOpened:o.noop,beforeOpened:o.noop};function t(t,n){this.element=t,this.modal={},this.options=o.extend({},i,n),this.overlay=o('<div class="vibox-overlay">'),this.content=o('<div class="vibox-content">'),this.iframe=o('<iframe class="vibox-iframe" src="'+this.options.src+'"></iframe>'),this.close=o('<span class="vibox-close">&times;</span>'),this.content.css({padding:this.options.padding,"margin-top":this.options.margin,"background-color":this.options.paddingColor,borderRadius:0==this.options.padding?0:this.options.borderRadius,width:this.options.responsive?"100%":this.options.width,"max-width":this.options.responsive?this.options.width:"auto",height:this.options.responsive?o(window).height()-2*this.options.margin:this.options.height,"max-height":this.options.responsive?this.options.height:"auto"}),this.init()}t.prototype.init=function(){1==this.options.preload?e(this,n(this)):e(this)};var n=function(i){i.content.append(i.close,i.iframe),i.overlay.append(i.content),i.modal=i.overlay,o("body").append(i.overlay)},e=function(i){i.element.click(function(){0==i.options.preload&&o.isEmptyObject(i.modal)&&n(i),i.options.beforeOpened(),s(i)}),i.content.click(function(o){o.stopPropagation()}),i.close.click(function(){return r(i)}),i.overlay.click(function(){return r(i)}),o(window).resize(function(){p(i)})},s=function(i){o("html").addClass("vibox-fixed-body"),i.overlay.fadeIn(i.options.onOpened())},r=function(i){i.options.beforeClosed(),i.overlay.fadeOut(i.options.onClosed,function(){o("html").removeClass("vibox-fixed-body")})},p=function(i){var t=o(window).height()-2*i.options.margin,n=t>i.options.height?i.options.height:t;i.content.css({height:i.options.responsive?n:i.options.height})};o.fn.vibox=function(o){return new t(this,o)}}(jQuery);
